# 详细模块设计

## 1. 核心系统模块
### 1.1 游戏主循环与场景管理
- 负责游戏状态切换、场景加载与卸载。
- 提供统一的事件分发与生命周期管理。
- 支持暂停、恢复、重启等操作。

### 1.2 资源加载与管理
- 动态加载图片、音效、动画等资源，支持预加载与异步加载。
- 资源引用计数与自动释放，避免内存泄漏。
- 资源版本控制与热更新支持。

### 1.3 数据持久化
- 本地存储玩家进度、配置、卡牌收集等数据。
- 支持云端同步与多端互通。
- 数据加密与备份机制。

## 2. 中医模拟经营模块
### 2.1 药材系统
- 药材种植、采集、成长周期管理。
- 药材属性（品阶、药效、稀有度等）与图鉴。
- 药材加工（炮制、合成）与配方系统。

### 2.2 店铺经营系统
- 顾客AI（需求生成、行为模拟、满意度反馈）。
- 商品定价、库存管理、促销活动。
- 店铺升级、装修、扩展功能。

### 2.3 经济系统
- 虚拟货币、收益结算、支出统计。
- 物价浮动、市场事件、任务奖励。

## 3. 卡牌养成模块
### 3.1 卡牌收集与管理
- 卡牌获取（抽卡、任务、合成等）。
- 卡牌分级、稀有度、图鉴展示。

### 3.2 卡牌升级与养成
- 卡牌经验、升级、突破、进化。
- 技能解锁与升级，属性成长。
- 卡牌装备、符文、羁绊系统。

### 3.3 卡组与策略
- 卡组编辑、保存、切换。
- 卡牌组合加成、策略搭配。
- 卡组战力评估与推荐。

## 4. 益智玩法模块
### 4.1 益智小游戏
- 连连看、三消、配对等玩法模板。
- 难度动态调整、关卡生成器。
- 玩法与主线系统联动（如药材采集、卡牌解锁等）。

### 4.2 奖励与反馈
- 通关奖励、连击奖励、成就系统。
- 失败惩罚与鼓励机制。

## 5. UI/UX模块
### 5.1 场景与界面
- 主界面、经营界面、卡牌界面、益智界面等多场景切换。
- 弹窗、提示、引导系统。

### 5.2 动画与特效
- UI动效、场景切换动画、卡牌特效。
- 资源加载进度、反馈动画。

## 6. 音效与美术资源管理
- 音效分组（背景、交互、事件等），支持静音与音量调节。
- 美术资源规范命名与分层管理。

## 7. 工具与辅助模块
- 配置表自动生成工具。
- 资源批量导入与格式转换脚本。
- 日志与调试工具。